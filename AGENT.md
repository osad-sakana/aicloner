# AGENT ガイド

このリポジトリで作業するエージェント向けの方針をまとめています。作業を始める前に必ず確認し、内容を守ってください。

## 応答ポリシー
- すべての回答は **簡潔な日本語** で行ってください。
- CLI 上で作業している前提のため、結果報告では過度な装飾を避け、要点を短く伝えます。

## プロジェクト概要
- Rust 製 CLI ツール `aicloner` は、単一のリモート Git リポジトリからタスクごとに新規 clone を作成し、`workspaces/<task>` で管理します。タスク追加時にタスク名と同名の Git ブランチを自動作成します。
- 主なモジュール構成: `src/cli.rs` (CLI 定義), `src/config.rs` (設定ファイルの読み書き), `src/repo.rs` (リポジトリ操作), `src/main.rs` (エントリーポイント)。
- 設定ファイル `.aicloner.toml` はリポジトリには含まれておらず、実行時に作成されます。

## ビルド・テスト
- ビルド: `cargo build --release`
- テスト: `cargo test`
- 実行例: `./target/release/aicloner <subcommand> ...`

## 開発時の注意
- `src/repo.rs` では Git コマンドを直接呼び出しており、`add` で `git clone --branch <from> --single-branch` → `git checkout -b <task>` の順番を維持します。外部コマンドのエラー処理やログ出力が崩れないよう注意してください。
- 設定ファイルの保存先ディレクトリが存在しない場合、自動的に `create_dir_all` で作成する仕様を維持します。
- `list` サブコマンドではワークスペース直下の各ディレクトリに対して `git rev-parse --abbrev-ref HEAD` を実行しており、失敗時はブランチ名を `-` と表示します。

## 依存関係
- 主なライブラリ: `anyhow`, `clap`, `serde`, `toml`
- Cargo.lock に追加の情報がありますが、個人情報・資格情報は含まれていません。

## ドキュメント
- `README.md` の冒頭にツールの背景が記載されています。内容更新時は同様のトーンを保ち、セットアップ手順やサブコマンド説明との整合性を確保してください。

## その他
- `.gitignore` は `/target` のみを無視しています。必要に応じて生成物やローカル構成ファイルを追加してください。
- 既に存在するユーザーの変更は基本的に尊重し、意図不明な変更を見つけた場合は作業を止めて確認してください。
